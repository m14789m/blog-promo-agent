
import streamlit as st
import openai

st.set_page_config(page_title="ูููู ุชุฑููุฌ ุงููุฏููุฉ", layout="centered")

st.title("๐ ูููู ุชุฑููุฌ ุฐูู ููุฏููุชู")
st.markdown("ุงูุชุจ ูุนูููุงุช ุงูุชุฏูููุฉ ูุณููุดุฆ ูู ููุดูุฑูุง ุชุฑููุฌููุง ุงุญุชุฑุงูููุง ุชููุงุฆููุง ุจุงุณุชุฎุฏุงู ุงูุฐูุงุก ุงูุงุตุทูุงุนู.")

# ุฅุฏุฎุงู ุงููุณุชุฎุฏู
title = st.text_input("๐ ุนููุงู ุงูุชุฏูููุฉ")
url = st.text_input("๐ ุฑุงุจุท ุงูุชุฏูููุฉ")
category = st.text_input("๐ ุงููุฆุฉ (ูุซูุงู: ูุธุงุฆูุ ุฏูุฑุงุชุ ุชุทููุฑ ุฐุงุช...)")

# ููุชุงุญ OpenAI - ูุชู ุฌูุจู ูู secrets
openai.api_key = st.secrets["OPENAI_API_KEY"]

if st.button("โจ ุฃูุดุฆ ุงูุชุฑููุฌ ุชููุงุฆููุง"):
    if not title or not url or not category:
        st.warning("ูุฑุฌู ุชุนุจุฆุฉ ุฌููุน ุงูุญููู ุฃููุงู.")
    else:
        with st.spinner("ุฌุงุฑู ุฅูุดุงุก ุงููุญุชูู ุงูุชุฑููุฌู..."):
            prompt = f"""
ุฃูุช ูุณุงุนุฏ ุชุณููู ุฐูู. ุฃูุดุฆ ููุดูุฑูุง ุชุฑููุฌููุง ูุชุฏูููุฉ ุฌุฏูุฏุฉ ูู ูุฏููุฉ ุณุนูุฏูุฉ ุนู "{category}".
ุงูุนููุงู: {title}
ุงูุฑุงุจุท: {url}

ุงููุชุงุฆุฌ ุงููุทููุจุฉ:
1. ูุตู ุชุฑููุฌู ุงุญุชุฑุงูู (3-5 ุฃุณุทุฑ)
2. ููุดูุฑ ููุงุณุจ ูุชููุชุฑ ุฃู ููุณุจูู
3. ูุงุดุชุงุบุงุช ููุชุฑุญุฉ
4. Meta Description ููุณูู
5. ูููุงุช ููุชุงุญูุฉ (SEO)

ุงูุชุจ ุจุงูุนุฑุจูุฉ ุงููุตุญูุ ุจูุจุฑุฉ ูุดููุฉ ููุญุชุฑูุฉุ ููุฌูุฉ ูุฌูููุฑ ุณุนูุฏู.
"""

            response = openai.chat.completions.create(
                model="gpt-4",
                messages=[
                    {"role": "system", "content": "ุฃูุช ูุณุงุนุฏ ุฐูู ูู ุงูุชุณููู."},
                    {"role": "user", "content": prompt}
                ],
                temperature=0.7,
                max_tokens=800
            )

            result = response.choices[0].message.content
            st.success("โ ุชู ุฅูุดุงุก ุงููุญุชูู ุงูุชุฑููุฌู ุจูุฌุงุญ!")
            st.markdown(result)
